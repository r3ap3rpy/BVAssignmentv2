language: java
jdk: oraclejdk8
os: linux
dist: trusty
services:
- docker
before_install:
- chmod +x mvnw
- curl https://omnitruck.chef.io/install.sh | sudo bash -s -- -P inspec
- sudo apt-get -y install ruby ruby-dev gcc g++ make
- ./mvnw clean install -B
after_success:
- echo "$DOCKER_PASSWORD" | docker login --username $DOCKER_USERNAME --password-stdin
- docker build  -t bvassignment .
- docker tag bvassignment $DOCKER_USERNAME/bvassignment:latest
- sudo inspec exec test.rb --chef-license yes
- if [ $? -eq 0 ] ;then docker push $DOCKER_USERNAME/bvassignment:latest ;else exit -1 fi

